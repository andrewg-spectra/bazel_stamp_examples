## C++ linkstamp

This examples uses the (undocumented) `linkstamp` attribute in `cc_library` to insert definitions 
into a stamped binary. Stamp definitions generated by Bazel and may be found in:

- `bazel-out/k8-fastbuild/include/build-info-nonvolatile.h`
- `bazel-out/k8-fastbuild/include/build-info-volatile.h`

Unfortunately, only a specific set of definitions may be used until 
[#1992](https://github.com/bazelbuild/bazel/issues/1992) is fixed. Therefore, `BUILD_SCM_REVISION`
is used in a `version-linkstamp.sh`


## With `bazel`:

`bazelisk run --stamp --workspace_status_command=$PWD/version-linkstamp.sh //main:cpp_linkstamp`

## With `g++`:

`export $(./version-linkstamp.sh | tr ' ' =)`

`g++ -D BUILD_SCM_REVISION=\"$BUILD_SCM_REVISION\" -I . main/cpp-linkstamp.cc lib/version.cc lib/version-linkstamp.cc`

`./a.out`
